import{aE as R,m,C as z,o as A,c as V,w as n,a,aR as Y,Q as b,E as T,e as J,ad as X,aj as K,af as D,aC as _,aH as j,ah as B,O as ee,ag as H,ae as F}from"./index.97d5dc32.js";import{a as y,b as C,Q as M}from"./QCard.f9f965bc.js";import{a as ae,b as L,c as O,d as W}from"./QTable.6f9469ac.js";import{Q as Z}from"./QCardActions.43e7e106.js";import{l as G}from"./QDialog.6dc8872f.js";import"./QSeparator.f14b87d2.js";class N{static async allAdmin(d,r){const t=await R.get(`api/admin/all-admin?page=${d}&filter=${r!=null?r:""}`);if(t.status==200)return t;throw Error("Get All Admin Failed")}static async createAdmin(d,r,t){const s=new FormData;s.append("name",d),s.append("email",r),s.append("password",t);const u=await R.post("api/admin/create-admin",s);if(u.status==200)return u;throw Error("Created Failed")}static async updateAdmin(d,r,t,s){const u=await R.put(`api/admin/update-admin/${d}`,{name:r,email:t,password:s});if(u.status==200)return u;throw Error("Update Failed")}static async deleteAdmin(d){const r=await R.delete(`api/admin/delete-admin/${d}`);if(r.status==200)return r;throw Error("Delete admin failed")}}const le=[{name:"id",align:"center",label:"ID",field:"id",sortable:!0},{name:"name",align:"center",label:"Admin Name",field:"name",sortable:!0},{name:"email",align:"center",label:"E-Mail",field:"email",sortable:!0}],I=m(),Q=v=>{v?N.allAdmin(v.pagination.page,v==null?void 0:v.filter).then(d=>{var r,t,s,u,p,f;I.value=d.data.admins,E.value.page=(s=(t=(r=d.data.meta)==null?void 0:r.pagination)==null?void 0:t.admins.current_page)!=null?s:1,E.value.rowsNumber=(f=(p=(u=d.data.meta)==null?void 0:u.pagination)==null?void 0:p.admins.total)!=null?f:1}):N.allAdmin(1,v==null?void 0:v.filter).then(d=>{var r,t,s,u,p,f;I.value=d.data.admins,E.value.page=(s=(t=(r=d.data.meta)==null?void 0:r.pagination)==null?void 0:t.admins.current_page)!=null?s:1,E.value.rowsNumber=(f=(p=(u=d.data.meta)==null?void 0:u.pagination)==null?void 0:p.admins.total)!=null?f:1})};Q(null);const E=m({sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:100}),re=T("div",{class:"text-h6"},"Create New Admin",-1),te=z({__name:"CreateAdmin",props:{modal:{default:!1},refresh:{}},emits:["update:modal"],setup(v,{emit:d}){const r=v,t=m(""),s=m(""),u=m(""),p=m(null),f=m(null),g=m(null),l=m({username:"",email:"",password:""}),o=d,h=()=>{o.call(this,"update:modal",!1)},P=()=>{N.createAdmin(l.value.username,l.value.email,l.value.password).then(c=>{c.status==200&&(r.refresh(),o.call(this,"update:modal",!1))},c=>{var i,e,w,k,q,S,U,x,$;c.response.status!=200&&c.response.data.errors&&(t.value=(w=(e=(i=c.response.data.errors)==null?void 0:i.name)==null?void 0:e.toString())!=null?w:"",s.value=(S=(q=(k=c.response.data.errors)==null?void 0:k.email)==null?void 0:q.toString())!=null?S:"",u.value=($=(x=(U=c.response.data.errors)==null?void 0:U.password)==null?void 0:x.toString())!=null?$:"",setTimeout(()=>{t.value="",s.value="",u.value=""},5e3))})};return(c,i)=>(A(),V(G,{"model-value":r.modal,persistent:""},{default:n(()=>[a(M,{style:{"min-width":"350px"}},{default:n(()=>[a(y,null,{default:n(()=>[re]),_:1}),a(y,{class:"q-pt-none"},{default:n(()=>[a(C,{dense:"","model-value":l.value.username,"onUpdate:modelValue":i[0]||(i[0]=e=>l.value.username=e),label:"Enter Your User Name",ref_key:"nameState",ref:p,error:t.value.length>0,"error-message":t.value,rules:[e=>!!e||"Required",e=>e.length>3||"Please use minimum 4 character",e=>e.length<=100||"Please use maximum 100 character"],"lazy-rules":"",hint:"You can use your first name or last name or nick name",onKeyup:Y(P,["enter"])},null,8,["model-value","error","error-message","rules"])]),_:1}),a(y,{class:"q-pt-none"},{default:n(()=>[a(C,{dense:"","model-value":l.value.email,"onUpdate:modelValue":i[1]||(i[1]=e=>l.value.email=e),label:"Enter Your E-Mail",ref_key:"emailState",ref:f,error:s.value.length>0,"error-message":s.value,rules:[e=>!!e||"Required",e=>e.length>3||"Please use minimum 4 character",e=>e.length<=100||"Please use maximum 100 character",(e,w)=>w.email(e)||"Please enter a valid email address"],"lazy-rules":"",hint:"enter a gmail or live or cloud or yahoo and etc account",onKeyup:Y(P,["enter"])},null,8,["model-value","error","error-message","rules"])]),_:1}),a(y,{class:"q-pt-none"},{default:n(()=>[a(C,{type:"password",dense:"","model-value":l.value.password,"onUpdate:modelValue":i[2]||(i[2]=e=>l.value.password=e),label:"Enter Your Password",ref_key:"passwordState",ref:g,error:u.value.length>0,"error-message":u.value,rules:[e=>!!e||"Required",e=>e.length>3||"Please use minimum 4 character",e=>e.length<=100||"Please use maximum 100 character",e=>/[a-z]/.test(e)||"Enter lower case character in your password",e=>/[A-Z]/.test(e)||"Enter upper case character in your password",e=>/[0-9]/.test(e)||"Enter number in your password",e=>/[~!@#$%^&*]/.test(e)||"Enter symbol in your password"],"lazy-rules":"",hint:"Enter your password that includes numbers, uppercase and lowercase letters, and symbols",onKeyup:Y(P,["enter"])},null,8,["model-value","error","error-message","rules"])]),_:1}),a(Z,{align:"right",class:"text-primary"},{default:n(()=>[a(b,{color:"red","icon-right":"close",label:"Cancel",onClick:h}),a(b,{color:"light-blue-8","icon-right":"create",label:"Create",onClick:P})]),_:1})]),_:1})]),_:1},8,["model-value"]))}}),se=T("div",{class:"text-h6"},"Update Admin",-1),oe=z({__name:"UpdateAdmin",props:{modal:{default:!1},data:{},refresh:{}},emits:["update:modal"],setup(v,{emit:d}){const r=v,t=m(""),s=m(""),u=m(""),p=m(null),f=m(null),g=m(null),l=m({id:0,username:"",email:"",password:""});J(r,()=>{l.value={id:r.data.id,username:r.data.name,email:r.data.email,password:r.data.password}});const o=d,h=()=>{o.call(this,"update:modal",!1)},P=()=>{N.updateAdmin(l.value.id,l.value.username,l.value.email,l.value.password).then(c=>{c.status==200&&(r.refresh(),o.call(this,"update:modal",!1))},c=>{var i,e,w,k,q,S,U,x,$;c.response.status!=200&&c.response.data.errors&&(t.value=(w=(e=(i=c.response.data.errors)==null?void 0:i.name)==null?void 0:e.toString())!=null?w:"",s.value=(S=(q=(k=c.response.data.errors)==null?void 0:k.email)==null?void 0:q.toString())!=null?S:"",u.value=($=(x=(U=c.response.data.errors)==null?void 0:U.password)==null?void 0:x.toString())!=null?$:"",setTimeout(()=>{t.value="",s.value="",u.value=""},5e3))})};return(c,i)=>(A(),V(G,{"model-value":r.modal,persistent:""},{default:n(()=>[a(M,{style:{"min-width":"350px"}},{default:n(()=>[a(y,null,{default:n(()=>[se]),_:1}),a(y,{class:"q-pt-none"},{default:n(()=>[a(C,{dense:"","model-value":l.value.username,"onUpdate:modelValue":i[0]||(i[0]=e=>l.value.username=e),label:"Enter Your User Name",ref_key:"nameState",ref:p,error:t.value.length>0,"error-message":t.value,rules:[e=>!!e||"Required",e=>e.length>3||"Please use minimum 4 character",e=>e.length<=100||"Please use maximum 100 character"],"lazy-rules":""},null,8,["model-value","error","error-message","rules"])]),_:1}),a(y,{class:"q-pt-none"},{default:n(()=>[a(C,{dense:"","model-value":l.value.email,"onUpdate:modelValue":i[1]||(i[1]=e=>l.value.email=e),label:"Enter Your E-Mail",ref_key:"emailState",ref:f,error:s.value.length>0,"error-message":s.value,rules:[e=>!!e||"Required",e=>e.length>3||"Please use minimum 4 character",e=>e.length<=100||"Please use maximum 100 character",(e,w)=>w.email(e)||"Please enter a valid email address"],"lazy-rules":""},null,8,["model-value","error","error-message","rules"])]),_:1}),a(y,{class:"q-pt-none"},{default:n(()=>[a(C,{type:"password",dense:"","model-value":l.value.password,"onUpdate:modelValue":i[2]||(i[2]=e=>l.value.password=e),label:"Enter Your Password",ref_key:"passwordState",ref:g,error:u.value.length>0,"error-message":u.value,rules:[e=>!!e||"Required",e=>e.length>3||"Please use minimum 4 character",e=>e.length<=100||"Please use maximum 100 character",e=>/[a-z]/.test(e)||"Enter lower case character in your password",e=>/[A-Z]/.test(e)||"Enter upper case character in your password",e=>/[0-9]/.test(e)||"Enter number in your password",e=>/[~!@#$%^&*]/.test(e)||"Enter symbol in your password"],"lazy-rules":""},null,8,["model-value","error","error-message","rules"])]),_:1}),a(Z,{align:"right",class:"text-primary"},{default:n(()=>[a(b,{color:"red","icon-right":"close",label:"Cancel",onClick:h}),a(b,{color:"light-blue-8","icon-right":"create",label:"Update",onClick:P})]),_:1})]),_:1})]),_:1},8,["model-value"]))}}),ne={class:"q-ml-sm"},de=z({__name:"DeleteAdmin",props:{modal:{default:!1},data:{},refresh:{}},emits:["update:modal"],setup(v,{emit:d}){const r=v,t=d,s=()=>{t.call(this,"update:modal",!1)},u=()=>{N.deleteAdmin(r.data.id).then(p=>{p.status==200&&(r.refresh(),t.call(this,"update:modal",!1))},p=>{p.response.status!=200&&p.response.data.errors&&console.log(p.response.data.errors)})};return(p,f)=>(A(),V(G,{"model-value":r.modal,persistent:""},{default:n(()=>[a(M,null,{default:n(()=>[a(y,{class:"row items-center"},{default:n(()=>[a(X,{icon:"person",color:"primary","text-color":"white"}),T("span",ne,"Are You Sure, Want You To Delete "+K(r.data.name)+"?",1)]),_:1}),a(Z,{align:"right"},{default:n(()=>[a(b,{color:"light-blue-8","icon-right":"close",label:"Cancel",onClick:s}),a(b,{color:"red","icon-right":"delete",label:"Delete",onClick:u})]),_:1})]),_:1})]),_:1},8,["model-value"]))}}),ue={class:"q-pa-md q-mb-lg overflow-auto window-height"},ge=z({__name:"AllAdminPage",setup(v){const d=m(""),r=m({modal:!1}),t=m({modal:!1,id:0,name:"",email:""}),s=m({modal:!1,id:0,name:""}),u=()=>{r.value.modal=!r.value.modal},p=g=>{t.value.id=g.id,t.value.name=g.name,t.value.email=g.email,t.value.modal=!t.value.modal},f=g=>{s.value.id=g.id,s.value.name=g.name,s.value.modal=!s.value.modal};return(g,l)=>(A(),D(B,null,[T("div",ue,[a(ae,{grid:g.$q.screen.xs,title:"All Admins",rows:_(I),columns:_(le),"row-key":"name",filter:d.value,"rows-per-page-options":[_(E).rowsPerPage],pagination:_(E),"onUpdate:pagination":l[2]||(l[2]=o=>j(E)?E.value=o:null),onRequest:_(Q)},{"top-right":n(()=>[a(C,{class:"bg-white",borderless:"",dense:"",debounce:"300",modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=o=>d.value=o),placeholder:"Search"},{append:n(()=>[a(ee,{name:"search"})]),_:1},8,["modelValue"]),a(b,{label:"Create New Admin",color:"light-blue-8",class:"q-ml-md",onClick:l[1]||(l[1]=o=>u())})]),header:n(o=>[a(L,{props:o},{default:n(()=>[(A(!0),D(B,null,H(o.cols,h=>(A(),V(O,{key:h.name,props:o},{default:n(()=>[F(K(h.label),1)]),_:2},1032,["props"]))),128)),a(O,{"auto-width":""},{default:n(()=>[F(" Tools ")]),_:1})]),_:2},1032,["props"])]),body:n(o=>[a(L,{props:o},{default:n(()=>[(A(!0),D(B,null,H(o.cols,h=>(A(),V(W,{key:h.name,props:o},{default:n(()=>[F(K(h.value),1)]),_:2},1032,["props"]))),128)),a(W,{"auto-width":""},{default:n(()=>[a(b,{class:"q-ma-sm",size:"md",color:"warning",dense:"",icon:"update",onClick:h=>p(o.row)},null,8,["onClick"]),a(b,{class:"q-ma-sm",size:"md",color:"red",dense:"",icon:"delete",onClick:h=>f(o.row)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["grid","rows","columns","filter","rows-per-page-options","pagination","onRequest"])]),a(te,{modal:r.value.modal,"onUpdate:modal":l[3]||(l[3]=o=>r.value.modal=o),refresh:_(Q)},null,8,["modal","refresh"]),a(oe,{modal:t.value.modal,"onUpdate:modal":l[4]||(l[4]=o=>t.value.modal=o),data:t.value,"onUpdate:data":l[5]||(l[5]=o=>t.value=o),refresh:_(Q)},null,8,["modal","data","refresh"]),a(de,{modal:s.value.modal,"onUpdate:modal":l[6]||(l[6]=o=>s.value.modal=o),data:s.value,"onUpdate:data":l[7]||(l[7]=o=>s.value=o),refresh:_(Q)},null,8,["modal","data","refresh"])],64))}});export{ge as default};
