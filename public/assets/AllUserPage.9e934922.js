import{m as u,a1 as $,C as R,o as _,c as N,w as t,a,aR as B,Q as b,E as z,e as G,ad as J,aj as K,af as T,aC as U,aH as X,ah as Y,O as j,ag as H,ae as D}from"./index.97d5dc32.js";import{a as y,b as P,Q as I}from"./QCard.f9f965bc.js";import{a as ee,b as L,c as O,d as W}from"./QTable.6f9469ac.js";import{Q as M}from"./QCardActions.43e7e106.js";import{l as Z}from"./QDialog.6dc8872f.js";import"./QSeparator.f14b87d2.js";const ae=[{name:"id",align:"center",label:"ID",field:"id",sortable:!0},{name:"name",align:"center",label:"User Name",field:"name",sortable:!0},{name:"email",align:"center",label:"E-Mail",field:"email",sortable:!0}],F=u(),V=v=>{v?$.allUserForAdmin(v.pagination.page,v==null?void 0:v.filter).then(p=>{var o,s,n,d,i,f;F.value=p.data.users,E.value.page=(n=(s=(o=p.data.meta)==null?void 0:o.pagination)==null?void 0:s.users.current_page)!=null?n:1,E.value.rowsNumber=(f=(i=(d=p.data.meta)==null?void 0:d.pagination)==null?void 0:i.users.total)!=null?f:1}):$.allUserForAdmin(1,v==null?void 0:v.filter).then(p=>{var o,s,n,d,i,f;F.value=p.data.users,E.value.page=(n=(s=(o=p.data.meta)==null?void 0:o.pagination)==null?void 0:s.users.current_page)!=null?n:1,E.value.rowsNumber=(f=(i=(d=p.data.meta)==null?void 0:d.pagination)==null?void 0:i.users.total)!=null?f:1})};V(null);const E=u({sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:100}),le=z("div",{class:"text-h6"},"Create New User",-1),re=R({__name:"AdminCreateUser",props:{modal:{default:!1},refresh:{}},emits:["update:modal"],setup(v,{emit:p}){const o=v,s=u(""),n=u(""),d=u(""),i=u(null),f=u(null),g=u(null),l=u({username:"",email:"",password:""}),r=p,h=()=>{r.call(this,"update:modal",!1)},C=()=>{$.createUserByAdmin(l.value.username,l.value.email,l.value.password).then(c=>{c.status==200&&(o.refresh(),r.call(this,"update:modal",!1))},c=>{var m,e,w,k,q,S,x,A,Q;c.response.status!=200&&c.response.data.errors&&(s.value=(w=(e=(m=c.response.data.errors)==null?void 0:m.name)==null?void 0:e.toString())!=null?w:"",n.value=(S=(q=(k=c.response.data.errors)==null?void 0:k.email)==null?void 0:q.toString())!=null?S:"",d.value=(Q=(A=(x=c.response.data.errors)==null?void 0:x.password)==null?void 0:A.toString())!=null?Q:"",setTimeout(()=>{s.value="",n.value="",d.value=""},5e3))})};return(c,m)=>(_(),N(Z,{"model-value":o.modal,persistent:""},{default:t(()=>[a(I,{style:{"min-width":"350px"}},{default:t(()=>[a(y,null,{default:t(()=>[le]),_:1}),a(y,{class:"q-pt-none"},{default:t(()=>[a(P,{dense:"","model-value":l.value.username,"onUpdate:modelValue":m[0]||(m[0]=e=>l.value.username=e),label:"Enter Your User Name",ref_key:"nameState",ref:i,error:s.value.length>0,"error-message":s.value,rules:[e=>!!e||"Required",e=>e.length>3||"Please use minimum 4 character",e=>e.length<=100||"Please use maximum 100 character"],"lazy-rules":"",hint:"You can use your first name or last name or nick name",onKeyup:B(C,["enter"])},null,8,["model-value","error","error-message","rules"])]),_:1}),a(y,{class:"q-pt-none"},{default:t(()=>[a(P,{dense:"","model-value":l.value.email,"onUpdate:modelValue":m[1]||(m[1]=e=>l.value.email=e),label:"Enter Your E-Mail",ref_key:"emailState",ref:f,error:n.value.length>0,"error-message":n.value,rules:[e=>!!e||"Required",e=>e.length>3||"Please use minimum 4 character",e=>e.length<=100||"Please use maximum 100 character",(e,w)=>w.email(e)||"Please enter a valid email address"],"lazy-rules":"",hint:"enter a gmail or live or cloud or yahoo and etc account",onKeyup:B(C,["enter"])},null,8,["model-value","error","error-message","rules"])]),_:1}),a(y,{class:"q-pt-none"},{default:t(()=>[a(P,{type:"password",dense:"","model-value":l.value.password,"onUpdate:modelValue":m[2]||(m[2]=e=>l.value.password=e),label:"Enter Your Password",ref_key:"passwordState",ref:g,error:d.value.length>0,"error-message":d.value,rules:[e=>!!e||"Required",e=>e.length>3||"Please use minimum 4 character",e=>e.length<=100||"Please use maximum 100 character",e=>/[a-z]/.test(e)||"Enter lower case character in your password",e=>/[A-Z]/.test(e)||"Enter upper case character in your password",e=>/[0-9]/.test(e)||"Enter number in your password",e=>/[~!@#$%^&*]/.test(e)||"Enter symbol in your password"],"lazy-rules":"",hint:"Enter your password that includes numbers, uppercase and lowercase letters, and symbols",onKeyup:B(C,["enter"])},null,8,["model-value","error","error-message","rules"])]),_:1}),a(M,{align:"right",class:"text-primary"},{default:t(()=>[a(b,{color:"red","icon-right":"close",label:"Cancel",onClick:h}),a(b,{color:"light-blue-8","icon-right":"create",label:"Create",onClick:C})]),_:1})]),_:1})]),_:1},8,["model-value"]))}}),se=z("div",{class:"text-h6"},"Update User",-1),te=R({__name:"AdminUpdateUser",props:{modal:{default:!1},data:{},refresh:{}},emits:["update:modal"],setup(v,{emit:p}){const o=v,s=u(""),n=u(""),d=u(""),i=u(null),f=u(null),g=u(null),l=u({id:0,username:"",email:"",password:""});G(o,()=>{l.value={id:o.data.id,username:o.data.name,email:o.data.email,password:o.data.password}});const r=p,h=()=>{r.call(this,"update:modal",!1)},C=()=>{$.updateUserByAdmin(l.value.id,l.value.username,l.value.email,l.value.password).then(c=>{c.status==200&&(o.refresh(),r.call(this,"update:modal",!1))},c=>{var m,e,w,k,q,S,x,A,Q;c.response.status!=200&&c.response.data.errors&&(s.value=(w=(e=(m=c.response.data.errors)==null?void 0:m.name)==null?void 0:e.toString())!=null?w:"",n.value=(S=(q=(k=c.response.data.errors)==null?void 0:k.email)==null?void 0:q.toString())!=null?S:"",d.value=(Q=(A=(x=c.response.data.errors)==null?void 0:x.password)==null?void 0:A.toString())!=null?Q:"",setTimeout(()=>{s.value="",n.value="",d.value=""},5e3))})};return(c,m)=>(_(),N(Z,{"model-value":o.modal,persistent:""},{default:t(()=>[a(I,{style:{"min-width":"350px"}},{default:t(()=>[a(y,null,{default:t(()=>[se]),_:1}),a(y,{class:"q-pt-none"},{default:t(()=>[a(P,{dense:"","model-value":l.value.username,"onUpdate:modelValue":m[0]||(m[0]=e=>l.value.username=e),label:"Enter Your User Name",ref_key:"nameState",ref:i,error:s.value.length>0,"error-message":s.value,rules:[e=>!!e||"Required",e=>e.length>3||"Please use minimum 4 character",e=>e.length<=100||"Please use maximum 100 character"],"lazy-rules":""},null,8,["model-value","error","error-message","rules"])]),_:1}),a(y,{class:"q-pt-none"},{default:t(()=>[a(P,{dense:"","model-value":l.value.email,"onUpdate:modelValue":m[1]||(m[1]=e=>l.value.email=e),label:"Enter Your E-Mail",ref_key:"emailState",ref:f,error:n.value.length>0,"error-message":n.value,rules:[e=>!!e||"Required",e=>e.length>3||"Please use minimum 4 character",e=>e.length<=100||"Please use maximum 100 character",(e,w)=>w.email(e)||"Please enter a valid email address"],"lazy-rules":""},null,8,["model-value","error","error-message","rules"])]),_:1}),a(y,{class:"q-pt-none"},{default:t(()=>[a(P,{type:"password",dense:"","model-value":l.value.password,"onUpdate:modelValue":m[2]||(m[2]=e=>l.value.password=e),label:"Enter Your Password",ref_key:"passwordState",ref:g,error:d.value.length>0,"error-message":d.value,rules:[e=>!!e||"Required",e=>e.length>3||"Please use minimum 4 character",e=>e.length<=100||"Please use maximum 100 character",e=>/[a-z]/.test(e)||"Enter lower case character in your password",e=>/[A-Z]/.test(e)||"Enter upper case character in your password",e=>/[0-9]/.test(e)||"Enter number in your password",e=>/[~!@#$%^&*]/.test(e)||"Enter symbol in your password"],"lazy-rules":""},null,8,["model-value","error","error-message","rules"])]),_:1}),a(M,{align:"right",class:"text-primary"},{default:t(()=>[a(b,{color:"red","icon-right":"close",label:"Cancel",onClick:h}),a(b,{color:"light-blue-8","icon-right":"create",label:"Update",onClick:C})]),_:1})]),_:1})]),_:1},8,["model-value"]))}}),oe={class:"q-ml-sm"},ne=R({__name:"AdminDeleteUser",props:{modal:{default:!1},data:{},refresh:{}},emits:["update:modal"],setup(v,{emit:p}){const o=v,s=p,n=()=>{s.call(this,"update:modal",!1)},d=()=>{$.deleteUserByAdmin(o.data.id).then(i=>{i.status==200&&(o.refresh(),s.call(this,"update:modal",!1))},i=>{i.response.status!=200&&i.response.data.errors&&console.log(i.response.data.errors)})};return(i,f)=>(_(),N(Z,{"model-value":o.modal,persistent:""},{default:t(()=>[a(I,null,{default:t(()=>[a(y,{class:"row items-center"},{default:t(()=>[a(J,{icon:"person",color:"primary","text-color":"white"}),z("span",oe,"Are You Sure, Want You To Delete "+K(o.data.name)+"?",1)]),_:1}),a(M,{align:"right"},{default:t(()=>[a(b,{color:"light-blue-8","icon-right":"close",label:"Cancel",onClick:n}),a(b,{color:"red","icon-right":"delete",label:"Delete",onClick:d})]),_:1})]),_:1})]),_:1},8,["model-value"]))}}),ue={class:"q-pa-md q-mb-lg overflow-auto window-height"},fe=R({__name:"AllUserPage",setup(v){const p=u(""),o=u({modal:!1}),s=u({modal:!1,id:0,name:"",email:""}),n=u({modal:!1,id:0,name:""}),d=()=>{o.value.modal=!o.value.modal},i=g=>{s.value.id=g.id,s.value.name=g.name,s.value.email=g.email,s.value.modal=!s.value.modal},f=g=>{n.value.id=g.id,n.value.name=g.name,n.value.modal=!n.value.modal};return(g,l)=>(_(),T(Y,null,[z("div",ue,[a(ee,{grid:g.$q.screen.xs,title:"All Users",rows:U(F),columns:U(ae),"row-key":"name",filter:p.value,"rows-per-page-options":[U(E).rowsPerPage],pagination:U(E),"onUpdate:pagination":l[2]||(l[2]=r=>X(E)?E.value=r:null),onRequest:U(V)},{"top-right":t(()=>[a(P,{class:"bg-white",borderless:"",dense:"",debounce:"300",modelValue:p.value,"onUpdate:modelValue":l[0]||(l[0]=r=>p.value=r),placeholder:"Search"},{append:t(()=>[a(j,{name:"search"})]),_:1},8,["modelValue"]),a(b,{label:"Create New User",color:"light-blue-8",class:"q-ml-md",onClick:l[1]||(l[1]=r=>d())})]),header:t(r=>[a(L,{props:r},{default:t(()=>[(_(!0),T(Y,null,H(r.cols,h=>(_(),N(O,{key:h.name,props:r},{default:t(()=>[D(K(h.label),1)]),_:2},1032,["props"]))),128)),a(O,{"auto-width":""},{default:t(()=>[D(" Tools ")]),_:1})]),_:2},1032,["props"])]),body:t(r=>[a(L,{props:r},{default:t(()=>[(_(!0),T(Y,null,H(r.cols,h=>(_(),N(W,{key:h.name,props:r},{default:t(()=>[D(K(h.value),1)]),_:2},1032,["props"]))),128)),a(W,{"auto-width":""},{default:t(()=>[a(b,{class:"q-ma-sm",size:"md",color:"warning",dense:"",icon:"update",onClick:h=>i(r.row)},null,8,["onClick"]),a(b,{class:"q-ma-sm",size:"md",color:"red",dense:"",icon:"delete",onClick:h=>f(r.row)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["grid","rows","columns","filter","rows-per-page-options","pagination","onRequest"])]),a(re,{modal:o.value.modal,"onUpdate:modal":l[3]||(l[3]=r=>o.value.modal=r),refresh:U(V)},null,8,["modal","refresh"]),a(te,{modal:s.value.modal,"onUpdate:modal":l[4]||(l[4]=r=>s.value.modal=r),data:s.value,"onUpdate:data":l[5]||(l[5]=r=>s.value=r),refresh:U(V)},null,8,["modal","data","refresh"]),a(ne,{modal:n.value.modal,"onUpdate:modal":l[6]||(l[6]=r=>n.value.modal=r),data:n.value,"onUpdate:data":l[7]||(l[7]=r=>n.value=r),refresh:U(V)},null,8,["modal","data","refresh"])],64))}});export{fe as default};
